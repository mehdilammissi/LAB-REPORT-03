// This code measures the resistance of an unknown resistor (Rx) on A0.
// It calculates the value in Ohms using a known reference resistor (R_ref).

// The setup() function runs once when the board is powered on or reset
void setup() {
  Serial.begin(9600);               // Initialize serial communication
}


// The loop() function runs continuously after setup() finishes
void loop() {
  int raw = analogRead(A0);         // Read the raw analog value (0-1023)
  long R_ref = 10000L;              // Define the known resistor value (10k Ohms)
  
  // Handle extreme readings to prevent division by zero or negative results
  if (raw < 5) {                    // Raw value near zero means very high Rx
    Serial.println("Rx: VERY HIGH");
  } else if (raw > 1020) {          // Raw value near 1023 means near zero Rx
    Serial.println("Rx: NEAR ZERO");
  } else {
    // R_x = R_ref * (1024 / raw - 1)
    // We use long for required precision during calculations
    long R_x = R_ref * (1024L / raw - 1L); 

    Serial.print(R_x);              // Print the resistance value
    Serial.println(" Ohms");        // Print the unit " Ohms"
  }
  delay(100);                       // Wait for 100 milliseconds
}
